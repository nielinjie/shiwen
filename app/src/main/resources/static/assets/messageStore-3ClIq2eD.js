import{Y as N,N as Y,d as ee,r as $}from"./index-Lsp5e0DB.js";const q={LF:`
`,NULL:"\0"};class M{constructor(c){const{command:e,headers:s,body:h,binaryBody:t,escapeHeaderValues:n,skipContentLengthHeader:i}=c;this.command=e,this.headers=Object.assign({},s||{}),t?(this._binaryBody=t,this.isBinaryBody=!0):(this._body=h||"",this.isBinaryBody=!1),this.escapeHeaderValues=n||!1,this.skipContentLengthHeader=i||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}static fromRawFrame(c,e){const s={},h=t=>t.replace(/^\s+|\s+$/g,"");for(const t of c.headers.reverse()){t.indexOf(":");const n=h(t[0]);let i=h(t[1]);e&&c.command!=="CONNECT"&&c.command!=="CONNECTED"&&(i=M.hdrValueUnEscape(i)),s[n]=i}return new M({command:c.command,headers:s,binaryBody:c.binaryBody,escapeHeaderValues:e})}toString(){return this.serializeCmdAndHeaders()}serialize(){const c=this.serializeCmdAndHeaders();return this.isBinaryBody?M.toUnit8Array(c,this._binaryBody).buffer:c+this._body+q.NULL}serializeCmdAndHeaders(){const c=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const e of Object.keys(this.headers||{})){const s=this.headers[e];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?c.push(`${e}:${M.hdrValueEscape(`${s}`)}`):c.push(`${e}:${s}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&c.push(`content-length:${this.bodyLength()}`),c.join(q.LF)+q.LF+q.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const c=this.binaryBody;return c?c.length:0}static sizeOfUTF8(c){return c?new TextEncoder().encode(c).length:0}static toUnit8Array(c,e){const s=new TextEncoder().encode(c),h=new Uint8Array([0]),t=new Uint8Array(s.length+e.length+h.length);return t.set(s),t.set(e,s.length),t.set(h,s.length+e.length),t}static marshall(c){return new M(c).serialize()}static hdrValueEscape(c){return c.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(c){return c.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const Q=0,G=10,J=13,te=58;class ne{constructor(c,e){this.onFrame=c,this.onIncomingPing=e,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(c,e=!1){let s;if(typeof c=="string"?s=this._encoder.encode(c):s=new Uint8Array(c),e&&s[s.length-1]!==0){const h=new Uint8Array(s.length+1);h.set(s,0),h[s.length]=0,s=h}for(let h=0;h<s.length;h++){const t=s[h];this._onByte(t)}}_collectFrame(c){if(c!==Q&&c!==J){if(c===G){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(c)}}_collectCommand(c){if(c!==J){if(c===G){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_collectHeaders(c){if(c!==J){if(c===G){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(c)}}_reinjectByte(c){this._onByte(c)}_collectHeaderKey(c){if(c===te){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(c)}_collectHeaderValue(c){if(c!==J){if(c===G){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_setupCollectBody(){const c=this._results.headers.filter(e=>e[0]==="content-length")[0];c?(this._bodyBytesRemaining=parseInt(c[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(c){if(c===Q){this._retrievedBody();return}this._consumeByte(c)}_collectBodyFixedSize(c){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(c)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(c){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",c)}this._initState()}_consumeByte(c){this._token.push(c)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const c=new Uint8Array(this._token);return this._token=[],c}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var F;(function(j){j[j.CONNECTING=0]="CONNECTING",j[j.OPEN=1]="OPEN",j[j.CLOSING=2]="CLOSING",j[j.CLOSED=3]="CLOSED"})(F=F||(F={}));var P;(function(j){j[j.ACTIVE=0]="ACTIVE",j[j.DEACTIVATING=1]="DEACTIVATING",j[j.INACTIVE=2]="INACTIVE"})(P=P||(P={}));class U{constructor(c){this.versions=c}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(c=>`v${c.replace(".","")}.stomp`)}}U.V1_0="1.0";U.V1_1="1.1";U.V1_2="1.2";U.default=new U([U.V1_2,U.V1_1,U.V1_0]);function ie(j,c){j.terminate=function(){const e=()=>{};this.onerror=e,this.onmessage=e,this.onopen=e;const s=new Date,h=Math.random().toString().substring(2,8),t=this.onclose;this.onclose=n=>{const i=new Date().getTime()-s.getTime();c(`Discarded socket (#${h})  closed after ${i}ms, with code/reason: ${n.code}/${n.reason}`)},this.close(),t==null||t.call(j,{code:4001,reason:`Quick discarding socket (#${h}) without waiting for the shutdown sequence.`,wasClean:!1})}}class se{constructor(c,e,s){this._client=c,this._webSocket=e,this._connected=!1,this._serverFrameHandlers={CONNECTED:h=>{this.debug(`connected to server ${h.headers.server}`),this._connected=!0,this._connectedVersion=h.headers.version,this._connectedVersion===U.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(h.headers),this.onConnect(h)},MESSAGE:h=>{const t=h.headers.subscription,n=this._subscriptions[t]||this.onUnhandledMessage,i=h,a=this,o=this._connectedVersion===U.V1_2?i.headers.ack:i.headers["message-id"];i.ack=(r={})=>a.ack(o,t,r),i.nack=(r={})=>a.nack(o,t,r),n(i)},RECEIPT:h=>{const t=this._receiptWatchers[h.headers["receipt-id"]];t?(t(h),delete this._receiptWatchers[h.headers["receipt-id"]]):this.onUnhandledReceipt(h)},ERROR:h=>{this.onStompError(h)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=s.debug,this.stompVersions=s.stompVersions,this.connectHeaders=s.connectHeaders,this.disconnectHeaders=s.disconnectHeaders,this.heartbeatIncoming=s.heartbeatIncoming,this.heartbeatOutgoing=s.heartbeatOutgoing,this.splitLargeFrames=s.splitLargeFrames,this.maxWebSocketChunkSize=s.maxWebSocketChunkSize,this.forceBinaryWSFrames=s.forceBinaryWSFrames,this.logRawCommunication=s.logRawCommunication,this.appendMissingNULLonIncoming=s.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=s.discardWebsocketOnCommFailure,this.onConnect=s.onConnect,this.onDisconnect=s.onDisconnect,this.onStompError=s.onStompError,this.onWebSocketClose=s.onWebSocketClose,this.onWebSocketError=s.onWebSocketError,this.onUnhandledMessage=s.onUnhandledMessage,this.onUnhandledReceipt=s.onUnhandledReceipt,this.onUnhandledFrame=s.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){const c=new ne(e=>{const s=M.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${s}`),(this._serverFrameHandlers[s.command]||this.onUnhandledFrame)(s)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=e=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const s=e.data instanceof ArrayBuffer?new TextDecoder().decode(e.data):e.data;this.debug(`<<< ${s}`)}c.parseChunk(e.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(c){if(c.version!==U.V1_1&&c.version!==U.V1_2||!c["heart-beat"])return;const[e,s]=c["heart-beat"].split(",").map(h=>parseInt(h,10));if(this.heartbeatOutgoing!==0&&s!==0){const h=Math.max(this.heartbeatOutgoing,s);this.debug(`send PING every ${h}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===F.OPEN&&(this._webSocket.send(q.LF),this.debug(">>> PING"))},h)}if(this.heartbeatIncoming!==0&&e!==0){const h=Math.max(this.heartbeatIncoming,e);this.debug(`check PONG every ${h}ms`),this._ponger=setInterval(()=>{const t=Date.now()-this._lastServerActivityTS;t>h*2&&(this.debug(`did not receive server activity for the last ${t}ms`),this._closeOrDiscardWebsocket())},h)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===F.CONNECTING||this._webSocket.readyState===F.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&ie(this._webSocket,c=>this.debug(c)),this._webSocket.terminate()}_transmit(c){const{command:e,headers:s,body:h,binaryBody:t,skipContentLengthHeader:n}=c,i=new M({command:e,headers:s,body:h,binaryBody:t,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:n});let a=i.serialize();if(this.logRawCommunication?this.debug(`>>> ${a}`):this.debug(`>>> ${i}`),this.forceBinaryWSFrames&&typeof a=="string"&&(a=new TextEncoder().encode(a)),typeof a!="string"||!this.splitLargeFrames)this._webSocket.send(a);else{let o=a;for(;o.length>0;){const r=o.substring(0,this.maxWebSocketChunkSize);o=o.substring(this.maxWebSocketChunkSize),this._webSocket.send(r),this.debug(`chunk sent = ${r.length}, remaining = ${o.length}`)}}}dispose(){if(this.connected)try{const c=Object.assign({},this.disconnectHeaders);c.receipt||(c.receipt=`close-${this._counter++}`),this.watchForReceipt(c.receipt,e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)}),this._transmit({command:"DISCONNECT",headers:c})}catch(c){this.debug(`Ignoring error during disconnect ${c}`)}else(this._webSocket.readyState===F.CONNECTING||this._webSocket.readyState===F.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(c){const{destination:e,headers:s,body:h,binaryBody:t,skipContentLengthHeader:n}=c,i=Object.assign({destination:e},s);this._transmit({command:"SEND",headers:i,body:h,binaryBody:t,skipContentLengthHeader:n})}watchForReceipt(c,e){this._receiptWatchers[c]=e}subscribe(c,e,s={}){s=Object.assign({},s),s.id||(s.id=`sub-${this._counter++}`),s.destination=c,this._subscriptions[s.id]=e,this._transmit({command:"SUBSCRIBE",headers:s});const h=this;return{id:s.id,unsubscribe(t){return h.unsubscribe(s.id,t)}}}unsubscribe(c,e={}){e=Object.assign({},e),delete this._subscriptions[c],e.id=c,this._transmit({command:"UNSUBSCRIBE",headers:e})}begin(c){const e=c||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:e}});const s=this;return{id:e,commit(){s.commit(e)},abort(){s.abort(e)}}}commit(c){this._transmit({command:"COMMIT",headers:{transaction:c}})}abort(c){this._transmit({command:"ABORT",headers:{transaction:c}})}ack(c,e,s={}){s=Object.assign({},s),this._connectedVersion===U.V1_2?s.id=c:s["message-id"]=c,s.subscription=e,this._transmit({command:"ACK",headers:s})}nack(c,e,s={}){return s=Object.assign({},s),this._connectedVersion===U.V1_2?s.id=c:s["message-id"]=c,s.subscription=e,this._transmit({command:"NACK",headers:s})}}class re{constructor(c={}){this.stompVersions=U.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=P.INACTIVE;const e=()=>{};this.debug=e,this.beforeConnect=e,this.onConnect=e,this.onDisconnect=e,this.onUnhandledMessage=e,this.onUnhandledReceipt=e,this.onUnhandledFrame=e,this.onStompError=e,this.onWebSocketClose=e,this.onWebSocketError=e,this.logRawCommunication=!1,this.onChangeState=e,this.connectHeaders={},this._disconnectHeaders={},this.configure(c)}get webSocket(){var c;return(c=this._stompHandler)==null?void 0:c._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(c){this._disconnectHeaders=c,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===P.ACTIVE}_changeState(c){this.state=c,this.onChangeState(c)}configure(c){Object.assign(this,c)}activate(){const c=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(P.ACTIVE),this._connect()};this.state===P.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{c()})):c()}async _connect(){if(await this.beforeConnect(),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const c=this._createWebSocket();this._stompHandler=new se(this,c,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===P.DEACTIVATING&&this._changeState(P.INACTIVE),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)}}),this._stompHandler.start()}_createWebSocket(){let c;if(this.webSocketFactory)c=this.webSocketFactory();else if(this.brokerURL)c=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return c.binaryType="arraybuffer",c}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}async deactivate(c={}){var t;const e=c.force||!1,s=this.active;let h;if(this.state===P.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(P.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==F.CLOSED){const n=this._stompHandler.onWebSocketClose;h=new Promise((i,a)=>{this._stompHandler.onWebSocketClose=o=>{n(o),i()}})}else return this._changeState(P.INACTIVE),Promise.resolve();return e?(t=this._stompHandler)==null||t.discardWebsocket():s&&this._disposeStompHandler(),h}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(c){this._checkConnection(),this._stompHandler.publish(c)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(c,e){this._checkConnection(),this._stompHandler.watchForReceipt(c,e)}subscribe(c,e,s={}){return this._checkConnection(),this._stompHandler.subscribe(c,e,s)}unsubscribe(c,e={}){this._checkConnection(),this._stompHandler.unsubscribe(c,e)}begin(c){return this._checkConnection(),this._stompHandler.begin(c)}commit(c){this._checkConnection(),this._stompHandler.commit(c)}abort(c){this._checkConnection(),this._stompHandler.abort(c)}ack(c,e,s={}){this._checkConnection(),this._stompHandler.ack(c,e,s)}nack(c,e,s={}){this._checkConnection(),this._stompHandler.nack(c,e,s)}}function z(j){throw new Error('Could not dynamically require "'+j+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z={exports:{}};(function(j,c){(function(e){j.exports=e()})(function(){return function e(s,h,t){function n(o,r){if(!h[o]){if(!s[o]){var l=typeof z=="function"&&z;if(!r&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var v=h[o]={exports:{}};s[o][0].call(v.exports,function(p){return n(s[o][1][p]||p)},v,v.exports,e,s,h,t)}return h[o].exports}for(var i=typeof z=="function"&&z,a=0;a<t.length;a++)n(t[a]);return n}({1:[function(e,s,h){(function(t){(function(){var n=e("./transport-list");s.exports=e("./main")(n),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,s,h){var t=e("inherits"),n=e("./event");function i(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}t(i,n),s.exports=i},{"./event":4,inherits:54}],3:[function(e,s,h){var t=e("inherits"),n=e("./eventtarget");function i(){n.call(this)}t(i,n),i.prototype.removeAllListeners=function(a){a?delete this._listeners[a]:this._listeners={}},i.prototype.once=function(a,o){var r=this,l=!1;this.on(a,function u(){r.removeListener(a,u),l||(l=!0,o.apply(this,arguments))})},i.prototype.emit=function(){var a=arguments[0],o=this._listeners[a];if(o){for(var r=arguments.length,l=new Array(r-1),u=1;u<r;u++)l[u-1]=arguments[u];for(var v=0;v<o.length;v++)o[v].apply(this,l)}},i.prototype.on=i.prototype.addListener=n.prototype.addEventListener,i.prototype.removeListener=n.prototype.removeEventListener,s.exports.EventEmitter=i},{"./eventtarget":5,inherits:54}],4:[function(e,s,h){function t(n){this.type=n}t.prototype.initEvent=function(n,i,a){return this.type=n,this.bubbles=i,this.cancelable=a,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,s.exports=t},{}],5:[function(e,s,h){function t(){this._listeners={}}t.prototype.addEventListener=function(n,i){n in this._listeners||(this._listeners[n]=[]);var a=this._listeners[n];a.indexOf(i)===-1&&(a=a.concat([i])),this._listeners[n]=a},t.prototype.removeEventListener=function(n,i){var a=this._listeners[n];if(a){var o=a.indexOf(i);o===-1||(1<a.length?this._listeners[n]=a.slice(0,o).concat(a.slice(o+1)):delete this._listeners[n])}},t.prototype.dispatchEvent=function(){var n=arguments[0],i=n.type,a=arguments.length===1?[n]:Array.apply(null,arguments);if(this["on"+i]&&this["on"+i].apply(this,a),i in this._listeners)for(var o=this._listeners[i],r=0;r<o.length;r++)o[r].apply(this,a)},s.exports=t},{}],6:[function(e,s,h){var t=e("inherits"),n=e("./event");function i(a){n.call(this),this.initEvent("message",!1,!1),this.data=a}t(i,n),s.exports=i},{"./event":4,inherits:54}],7:[function(e,s,h){var t=e("./utils/iframe");function n(i){(this._transport=i).on("message",this._transportMessage.bind(this)),i.on("close",this._transportClose.bind(this))}n.prototype._transportClose=function(i,a){t.postMessage("c",JSON.stringify([i,a]))},n.prototype._transportMessage=function(i){t.postMessage("t",i)},n.prototype._send=function(i){this._transport.send(i)},n.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},s.exports=n},{"./utils/iframe":47}],8:[function(e,s,h){var t=e("./utils/url"),n=e("./utils/event"),i=e("./facade"),a=e("./info-iframe-receiver"),o=e("./utils/iframe"),r=e("./location"),l=function(){};s.exports=function(u,v){var p,b={};v.forEach(function(f){f.facadeTransport&&(b[f.facadeTransport.transportName]=f.facadeTransport)}),b[a.transportName]=a,u.bootstrap_iframe=function(){var f;o.currentWindowId=r.hash.slice(1),n.attachEvent("message",function(m){if(m.source===parent&&(p===void 0&&(p=m.origin),m.origin===p)){var S;try{S=JSON.parse(m.data)}catch{return void l("bad json",m.data)}if(S.windowId===o.currentWindowId)switch(S.type){case"s":var T;try{T=JSON.parse(S.data)}catch{l("bad json",S.data);break}var I=T[0],w=T[1],_=T[2],E=T[3];if(I!==u.version)throw new Error('Incompatible SockJS! Main site uses: "'+I+'", the iframe: "'+u.version+'".');if(!t.isOriginEqual(_,r.href)||!t.isOriginEqual(E,r.href))throw new Error("Can't connect to different domain from within an iframe. ("+r.href+", "+_+", "+E+")");f=new i(new b[w](_,E));break;case"m":f._send(S.data);break;case"c":f&&f._close(),f=null}}}),o.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0}],9:[function(e,s,h){var t=e("events").EventEmitter,n=e("inherits"),i=e("./utils/object");function a(o,r){t.call(this);var l=this,u=+new Date;this.xo=new r("GET",o),this.xo.once("finish",function(v,p){var b,f;if(v===200){if(f=+new Date-u,p)try{b=JSON.parse(p)}catch{}i.isObject(b)||(b={})}l.emit("finish",b,f),l.removeAllListeners()})}n(a,t),a.prototype.close=function(){this.removeAllListeners(),this.xo.close()},s.exports=a},{"./utils/object":49,debug:void 0,events:3,inherits:54}],10:[function(e,s,h){var t=e("inherits"),n=e("events").EventEmitter,i=e("./transport/sender/xhr-local"),a=e("./info-ajax");function o(r){var l=this;n.call(this),this.ir=new a(r,i),this.ir.once("finish",function(u,v){l.ir=null,l.emit("message",JSON.stringify([u,v]))})}t(o,n),o.transportName="iframe-info-receiver",o.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},s.exports=o},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54}],11:[function(e,s,h){(function(t){(function(){var n=e("events").EventEmitter,i=e("inherits"),a=e("./utils/event"),o=e("./transport/iframe"),r=e("./info-iframe-receiver");function l(u,v){var p=this;n.call(this);function b(){var f=p.ifr=new o(r.transportName,v,u);f.once("message",function(m){if(m){var S;try{S=JSON.parse(m)}catch{return p.emit("finish"),void p.close()}var T=S[0],I=S[1];p.emit("finish",T,I)}p.close()}),f.once("close",function(){p.emit("finish"),p.close()})}t.document.body?b():a.attachEvent("load",b)}i(l,n),l.enabled=function(){return o.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},s.exports=l}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54}],12:[function(e,s,h){var t=e("events").EventEmitter,n=e("inherits"),i=e("./utils/url"),a=e("./transport/sender/xdr"),o=e("./transport/sender/xhr-cors"),r=e("./transport/sender/xhr-local"),l=e("./transport/sender/xhr-fake"),u=e("./info-iframe"),v=e("./info-ajax");function p(b,f){var m=this;t.call(this),setTimeout(function(){m.doXhr(b,f)},0)}n(p,t),p._getReceiver=function(b,f,m){return m.sameOrigin?new v(f,r):o.enabled?new v(f,o):a.enabled&&m.sameScheme?new v(f,a):u.enabled()?new u(b,f):new v(f,l)},p.prototype.doXhr=function(b,f){var m=this,S=i.addPath(b,"/info");this.xo=p._getReceiver(b,S,f),this.timeoutRef=setTimeout(function(){m._cleanup(!1),m.emit("finish")},p.timeout),this.xo.once("finish",function(T,I){m._cleanup(!0),m.emit("finish",T,I)})},p.prototype._cleanup=function(b){clearTimeout(this.timeoutRef),this.timeoutRef=null,!b&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,s.exports=p},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(e,s,h){(function(t){(function(){s.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{}],14:[function(e,s,h){(function(t){(function(){e("./shims");var n,i=e("url-parse"),a=e("inherits"),o=e("./utils/random"),r=e("./utils/escape"),l=e("./utils/url"),u=e("./utils/event"),v=e("./utils/transport"),p=e("./utils/object"),b=e("./utils/browser"),f=e("./utils/log"),m=e("./event/event"),S=e("./event/eventtarget"),T=e("./location"),I=e("./event/close"),w=e("./event/trans-message"),_=e("./info-receiver"),E=function(){};function d(x,O,g){if(!(this instanceof d))return new d(x,O,g);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");S.call(this),this.readyState=d.CONNECTING,this.extensions="",this.protocol="",(g=g||{}).protocols_whitelist&&f.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=g.transports,this._transportOptions=g.transportOptions||{},this._timeout=g.timeout||0;var C=g.sessionId||8;if(typeof C=="function")this._generateSessionId=C;else{if(typeof C!="number")throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return o.string(C)}}this._server=g.server||o.numberString(1e3);var k=new i(x);if(!k.host||!k.protocol)throw new SyntaxError("The URL '"+x+"' is invalid");if(k.hash)throw new SyntaxError("The URL must not contain a fragment");if(k.protocol!=="http:"&&k.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+k.protocol+"' is not allowed.");var L=k.protocol==="https:";if(T.protocol==="https:"&&!L&&!l.isLoopbackAddr(k.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");O?Array.isArray(O)||(O=[O]):O=[];var y=O.sort();y.forEach(function(R,B){if(!R)throw new SyntaxError("The protocols entry '"+R+"' is invalid.");if(B<y.length-1&&R===y[B+1])throw new SyntaxError("The protocols entry '"+R+"' is duplicated.")});var H=l.getOrigin(T.href);this._origin=H?H.toLowerCase():null,k.set("pathname",k.pathname.replace(/\/+$/,"")),this.url=k.href,E("using url",this.url),this._urlInfo={nullOrigin:!b.hasDomain(),sameOrigin:l.isOriginEqual(this.url,T.href),sameScheme:l.isSchemeEqual(this.url,T.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function A(x){return x===1e3||3e3<=x&&x<=4999}a(d,S),d.prototype.close=function(x,O){if(x&&!A(x))throw new Error("InvalidAccessError: Invalid code");if(O&&123<O.length)throw new SyntaxError("reason argument has an invalid length");this.readyState!==d.CLOSING&&this.readyState!==d.CLOSED&&this._close(x||1e3,O||"Normal closure",!0)},d.prototype.send=function(x){if(typeof x!="string"&&(x=""+x),this.readyState===d.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===d.OPEN&&this._transport.send(r.quote(x))},d.version=e("./version"),d.CONNECTING=0,d.OPEN=1,d.CLOSING=2,d.CLOSED=3,d.prototype._receiveInfo=function(x,O){if(this._ir=null,x){this._rto=this.countRTO(O),this._transUrl=x.base_url?x.base_url:this.url,x=p.extend(x,this._urlInfo);var g=n.filterToEnabled(this._transportsWhitelist,x);this._transports=g.main,E(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},d.prototype._connect=function(){for(var x=this._transports.shift();x;x=this._transports.shift()){if(E("attempt",x.transportName),x.needBody&&(!t.document.body||t.document.readyState!==void 0&&t.document.readyState!=="complete"&&t.document.readyState!=="interactive"))return this._transports.unshift(x),void u.attachEvent("load",this._connect.bind(this));var O=Math.max(this._timeout,this._rto*x.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),O);var g=l.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),C=this._transportOptions[x.transportName],k=new x(g,this._transUrl,C);return k.on("message",this._transportMessage.bind(this)),k.once("close",this._transportClose.bind(this)),k.transportName=x.transportName,void(this._transport=k)}this._close(2e3,"All transports failed",!1)},d.prototype._transportTimeout=function(){this.readyState===d.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},d.prototype._transportMessage=function(x){var O,g=this,C=x.slice(0,1),k=x.slice(1);switch(C){case"o":return void this._open();case"h":return this.dispatchEvent(new m("heartbeat")),void E("heartbeat",this.transport)}if(k)try{O=JSON.parse(k)}catch{}if(O!==void 0)switch(C){case"a":Array.isArray(O)&&O.forEach(function(L){E("message",g.transport),g.dispatchEvent(new w(L))});break;case"m":E("message",this.transport),this.dispatchEvent(new w(O));break;case"c":Array.isArray(O)&&O.length===2&&this._close(O[0],O[1],!0)}},d.prototype._transportClose=function(x,O){E("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),A(x)||x===2e3||this.readyState!==d.CONNECTING?this._close(x,O):this._connect()},d.prototype._open=function(){E("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===d.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=d.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new m("open")),E("connected",this.transport)):this._close(1006,"Server lost session")},d.prototype._close=function(x,O,g){E("_close",this.transport,x,O,g,this.readyState);var C=!1;if(this._ir&&(C=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===d.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=d.CLOSING,setTimeout((function(){this.readyState=d.CLOSED,C&&this.dispatchEvent(new m("error"));var k=new I("close");k.wasClean=g||!1,k.code=x||1e3,k.reason=O,this.dispatchEvent(k),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},d.prototype.countRTO=function(x){return 100<x?4*x:300+x},s.exports=function(x){return n=v(x),e("./iframe-bootstrap")(d,x),d}}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,"url-parse":57}],15:[function(e,s,h){function t(g){return o.toString.call(g)==="[object Function]"}function n(g){return v.call(g)==="[object String]"}var i,a=Array.prototype,o=Object.prototype,r=Function.prototype,l=String.prototype,u=a.slice,v=o.toString,p=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}();i=p?function(g,C,k,L){!L&&C in g||Object.defineProperty(g,C,{configurable:!0,enumerable:!1,writable:!0,value:k})}:function(g,C,k,L){!L&&C in g||(g[C]=k)};function b(g,C,k){for(var L in C)o.hasOwnProperty.call(C,L)&&i(g,L,C[L],k)}function f(g){if(g==null)throw new TypeError("can't convert "+g+" to object");return Object(g)}function m(){}b(r,{bind:function(g){var C=this;if(!t(C))throw new TypeError("Function.prototype.bind called on incompatible "+C);for(var k=u.call(arguments,1),L=Math.max(0,C.length-k.length),y=[],H=0;H<L;H++)y.push("$"+H);var R=Function("binder","return function ("+y.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof R){var B=C.apply(this,k.concat(u.call(arguments)));return Object(B)===B?B:this}return C.apply(g,k.concat(u.call(arguments)))});return C.prototype&&(m.prototype=C.prototype,R.prototype=new m,m.prototype=null),R}}),b(Array,{isArray:function(g){return v.call(g)==="[object Array]"}});var S,T,I,w=Object("a"),_=w[0]!=="a"||!(0 in w);b(a,{forEach:function(g,C){var k=f(this),L=_&&n(this)?this.split(""):k,y=C,H=-1,R=L.length>>>0;if(!t(g))throw new TypeError;for(;++H<R;)H in L&&g.call(y,L[H],H,k)}},(S=a.forEach,I=T=!0,S&&(S.call("foo",function(g,C,k){typeof k!="object"&&(T=!1)}),S.call([1],function(){I=typeof this=="string"},"x")),!(S&&T&&I)));var E=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;b(a,{indexOf:function(g,C){var k=_&&n(this)?this.split(""):f(this),L=k.length>>>0;if(!L)return-1;var y=0;for(1<arguments.length&&(y=function(H){var R=+H;return R!=R?R=0:R!==0&&R!==1/0&&R!==-1/0&&(R=(0<R||-1)*Math.floor(Math.abs(R))),R}(C)),y=0<=y?y:Math.max(0,L+y);y<L;y++)if(y in k&&k[y]===g)return y;return-1}},E);var d,A=l.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||1<".".split(/()()/).length?(d=/()??/.exec("")[1]===void 0,l.split=function(g,C){var k=this;if(g===void 0&&C===0)return[];if(v.call(g)!=="[object RegExp]")return A.call(this,g,C);var L,y,H,R,B=[],D=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.extended?"x":"")+(g.sticky?"y":""),W=0;for(g=new RegExp(g.source,D+"g"),k+="",d||(L=new RegExp("^"+g.source+"$(?!\\s)",D)),C=C===void 0?-1>>>0:function(V){return V>>>0}(C);(y=g.exec(k))&&!(W<(H=y.index+y[0].length)&&(B.push(k.slice(W,y.index)),!d&&1<y.length&&y[0].replace(L,function(){for(var V=1;V<arguments.length-2;V++)arguments[V]===void 0&&(y[V]=void 0)}),1<y.length&&y.index<k.length&&a.push.apply(B,y.slice(1)),R=y[0].length,W=H,B.length>=C));)g.lastIndex===y.index&&g.lastIndex++;return W===k.length?!R&&g.test("")||B.push(""):B.push(k.slice(W)),B.length>C?B.slice(0,C):B}):"0".split(void 0,0).length&&(l.split=function(g,C){return g===void 0&&C===0?[]:A.call(this,g,C)});var x=l.substr,O="".substr&&"0b".substr(-1)!=="b";b(l,{substr:function(g,C){return x.call(this,g<0&&(g=this.length+g)<0?0:g,C)}},O)},{}],16:[function(e,s,h){s.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,s,h){(function(t){(function(){var n=e("events").EventEmitter,i=e("inherits"),a=e("../../utils/event"),o=e("../../utils/url"),r=t.XMLHttpRequest,l=function(){};function u(b,f,m,S){var T=this;n.call(this),setTimeout(function(){T._start(b,f,m,S)},0)}i(u,n),u.prototype._start=function(b,f,m,S){var T=this;try{this.xhr=new r}catch{}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();f=o.addQuery(f,"t="+ +new Date),this.unloadRef=a.unloadAdd(function(){T._cleanup(!0)});try{this.xhr.open(b,f,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){l("xhr timeout"),T.emit("finish",0,""),T._cleanup(!1)})}catch{return this.emit("finish",0,""),void this._cleanup(!1)}if(S&&S.noCredentials||!u.supportsCORS||(this.xhr.withCredentials=!0),S&&S.headers)for(var I in S.headers)this.xhr.setRequestHeader(I,S.headers[I]);this.xhr.onreadystatechange=function(){if(T.xhr){var w,_,E=T.xhr;switch(l("readyState",E.readyState),E.readyState){case 3:try{_=E.status,w=E.responseText}catch{}_===1223&&(_=204),_===200&&w&&0<w.length&&T.emit("chunk",_,w);break;case 4:_=E.status,_===1223&&(_=204),_!==12005&&_!==12029||(_=0),l("finish",_,E.responseText),T.emit("finish",_,E.responseText),T._cleanup(!1)}}};try{T.xhr.send(m)}catch{T.emit("finish",0,""),T._cleanup(!1)}},u.prototype._cleanup=function(b){if(this.xhr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),b)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},u.prototype.close=function(){this._cleanup(!0)},u.enabled=!!r;var v=["Active"].concat("Object").join("X");!u.enabled&&v in t&&(u.enabled=!!new(r=function(){try{return new t[v]("Microsoft.XMLHTTP")}catch{return null}}));var p=!1;try{p="withCredentials"in new r}catch{}u.supportsCORS=p,s.exports=u}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(e,s,h){(function(t){(function(){s.exports=t.EventSource}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{}],19:[function(e,s,h){(function(t){(function(){var n=t.WebSocket||t.MozWebSocket;s.exports=n?function(i){return new n(i)}:void 0}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{}],20:[function(e,s,h){var t=e("inherits"),n=e("./lib/ajax-based"),i=e("./receiver/eventsource"),a=e("./sender/xhr-cors"),o=e("eventsource");function r(l){if(!r.enabled())throw new Error("Transport created when disabled");n.call(this,l,"/eventsource",i,a)}t(r,n),r.enabled=function(){return!!o},r.transportName="eventsource",r.roundTrips=2,s.exports=r},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(e,s,h){var t=e("inherits"),n=e("./receiver/htmlfile"),i=e("./sender/xhr-local"),a=e("./lib/ajax-based");function o(r){if(!n.enabled)throw new Error("Transport created when disabled");a.call(this,r,"/htmlfile",n,i)}t(o,a),o.enabled=function(r){return n.enabled&&r.sameOrigin},o.transportName="htmlfile",o.roundTrips=2,s.exports=o},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(e,s,h){var t=e("inherits"),n=e("events").EventEmitter,i=e("../version"),a=e("../utils/url"),o=e("../utils/iframe"),r=e("../utils/event"),l=e("../utils/random"),u=function(){};function v(p,b,f){if(!v.enabled())throw new Error("Transport created when disabled");n.call(this);var m=this;this.origin=a.getOrigin(f),this.baseUrl=f,this.transUrl=b,this.transport=p,this.windowId=l.string(8);var S=a.addPath(f,"/iframe.html")+"#"+this.windowId;this.iframeObj=o.createIframe(S,function(T){m.emit("close",1006,"Unable to load an iframe ("+T+")"),m.close()}),this.onmessageCallback=this._message.bind(this),r.attachEvent("message",this.onmessageCallback)}t(v,n),v.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){r.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},v.prototype._message=function(p){if(u("message",p.data),a.isOriginEqual(p.origin,this.origin)){var b;try{b=JSON.parse(p.data)}catch{return void u("bad json",p.data)}if(b.windowId===this.windowId)switch(b.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([i,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",b.data);break;case"c":var f;try{f=JSON.parse(b.data)}catch{return void u("bad json",b.data)}this.emit("close",f[0],f[1]),this.close()}else u("mismatched window id",b.windowId,this.windowId)}else u("not same origin",p.origin,this.origin)},v.prototype.postMessage=function(p,b){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:p,data:b||""}),this.origin)},v.prototype.send=function(p){this.postMessage("m",p)},v.enabled=function(){return o.iframeEnabled},v.transportName="iframe",v.roundTrips=2,s.exports=v},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54}],23:[function(e,s,h){(function(t){(function(){var n=e("inherits"),i=e("./lib/sender-receiver"),a=e("./receiver/jsonp"),o=e("./sender/jsonp");function r(l){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,l,"/jsonp",o,a)}n(r,i),r.enabled=function(){return!!t.document},r.transportName="jsonp-polling",r.roundTrips=1,r.needBody=!0,s.exports=r}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(e,s,h){var t=e("inherits"),n=e("../../utils/url"),i=e("./sender-receiver");function a(o,r,l,u){i.call(this,o,r,function(v){return function(p,b,f){var m={};typeof b=="string"&&(m.headers={"Content-type":"text/plain"});var S=n.addPath(p,"/xhr_send"),T=new v("POST",S,b,m);return T.once("finish",function(I){if(T=null,I!==200&&I!==204)return f(new Error("http status "+I));f()}),function(){T.close(),T=null;var I=new Error("Aborted");I.code=1e3,f(I)}}}(u),l,u)}t(a,i),s.exports=a},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(e,s,h){var t=e("inherits"),n=e("events").EventEmitter,i=function(){};function a(o,r){n.call(this),this.sendBuffer=[],this.sender=r,this.url=o}t(a,n),a.prototype.send=function(o){this.sendBuffer.push(o),this.sendStop||this.sendSchedule()},a.prototype.sendScheduleWait=function(){var o,r=this;this.sendStop=function(){r.sendStop=null,clearTimeout(o)},o=setTimeout(function(){r.sendStop=null,r.sendSchedule()},25)},a.prototype.sendSchedule=function(){i("sendSchedule",this.sendBuffer.length);var o=this;if(0<this.sendBuffer.length){var r="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,r,function(l){o.sendStop=null,l?(o.emit("close",l.code||1006,"Sending error: "+l),o.close()):o.sendScheduleWait()}),this.sendBuffer=[]}},a.prototype._cleanup=function(){this.removeAllListeners()},a.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},s.exports=a},{debug:void 0,events:3,inherits:54}],26:[function(e,s,h){(function(t){(function(){var n=e("inherits"),i=e("../iframe"),a=e("../../utils/object");s.exports=function(o){function r(l,u){i.call(this,o.transportName,l,u)}return n(r,i),r.enabled=function(l,u){if(!t.document)return!1;var v=a.extend({},u);return v.sameOrigin=!0,o.enabled(v)&&i.enabled()},r.transportName="iframe-"+o.transportName,r.needBody=!0,r.roundTrips=i.roundTrips+o.roundTrips-1,r.facadeTransport=o,r}}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(e,s,h){var t=e("inherits"),n=e("events").EventEmitter,i=function(){};function a(o,r,l){n.call(this),this.Receiver=o,this.receiveUrl=r,this.AjaxObject=l,this._scheduleReceiver()}t(a,n),a.prototype._scheduleReceiver=function(){var o=this,r=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);r.on("message",function(l){o.emit("message",l)}),r.once("close",function(l,u){i("close",l,u,o.pollIsClosing),o.poll=r=null,o.pollIsClosing||(u==="network"?o._scheduleReceiver():(o.emit("close",l||1006,u),o.removeAllListeners()))})},a.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},s.exports=a},{debug:void 0,events:3,inherits:54}],28:[function(e,s,h){var t=e("inherits"),n=e("../../utils/url"),i=e("./buffered-sender"),a=e("./polling");function o(r,l,u,v,p){var b=n.addPath(r,l),f=this;i.call(this,r,u),this.poll=new a(v,b,p),this.poll.on("message",function(m){f.emit("message",m)}),this.poll.once("close",function(m,S){f.poll=null,f.emit("close",m,S),f.close()})}t(o,i),o.prototype.close=function(){i.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},s.exports=o},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(e,s,h){var t=e("inherits"),n=e("events").EventEmitter,i=e("eventsource"),a=function(){};function o(r){n.call(this);var l=this,u=this.es=new i(r);u.onmessage=function(v){a("message",v.data),l.emit("message",decodeURI(v.data))},u.onerror=function(v){a("error",u.readyState);var p=u.readyState!==2?"network":"permanent";l._cleanup(),l._close(p)}}t(o,n),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var r=this.es;r&&(r.onmessage=r.onerror=null,r.close(),this.es=null)},o.prototype._close=function(r){var l=this;setTimeout(function(){l.emit("close",null,r),l.removeAllListeners()},200)},s.exports=o},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(e,s,h){(function(t){(function(){var n=e("inherits"),i=e("../../utils/iframe"),a=e("../../utils/url"),o=e("events").EventEmitter,r=e("../../utils/random"),l=function(){};function u(p){o.call(this);var b=this;i.polluteGlobalNamespace(),this.id="a"+r.string(6),p=a.addQuery(p,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),l("using htmlfile",u.htmlfileEnabled);var f=u.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){b.iframeObj.loaded()},message:function(m){b.emit("message",m)},stop:function(){b._cleanup(),b._close("network")}},this.iframeObj=f(p,function(){b._cleanup(),b._close("permanent")})}n(u,o),u.prototype.abort=function(){this._cleanup(),this._close("user")},u.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},u.prototype._close=function(p){this.emit("close",null,p),this.removeAllListeners()},u.htmlfileEnabled=!1;var v=["Active"].concat("Object").join("X");if(v in t)try{u.htmlfileEnabled=!!new t[v]("htmlfile")}catch{}u.enabled=u.htmlfileEnabled||i.iframeEnabled,s.exports=u}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(e,s,h){(function(t){(function(){var n=e("../../utils/iframe"),i=e("../../utils/random"),a=e("../../utils/browser"),o=e("../../utils/url"),r=e("inherits"),l=e("events").EventEmitter,u=function(){};function v(p){var b=this;l.call(this),n.polluteGlobalNamespace(),this.id="a"+i.string(6);var f=o.addQuery(p,"c="+encodeURIComponent(n.WPrefix+"."+this.id));t[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(f),this.timeoutId=setTimeout(function(){b._abort(new Error("JSONP script loaded abnormally (timeout)"))},v.timeout)}r(v,l),v.prototype.abort=function(){if(t[n.WPrefix][this.id]){var p=new Error("JSONP user aborted read");p.code=1e3,this._abort(p)}},v.timeout=35e3,v.scriptErrorTimeout=1e3,v.prototype._callback=function(p){this._cleanup(),this.aborting||(p&&this.emit("message",p),this.emit("close",null,"network"),this.removeAllListeners())},v.prototype._abort=function(p){this._cleanup(),this.aborting=!0,this.emit("close",p.code,p.message),this.removeAllListeners()},v.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var p=this.script;p.parentNode.removeChild(p),p.onreadystatechange=p.onerror=p.onload=p.onclick=null,this.script=null}delete t[n.WPrefix][this.id]},v.prototype._scriptError=function(){var p=this;this.errorTimer||(this.errorTimer=setTimeout(function(){p.loadedOkay||p._abort(new Error("JSONP script loaded abnormally (onerror)"))},v.scriptErrorTimeout))},v.prototype._createScript=function(p){var b,f=this,m=this.script=t.document.createElement("script");if(m.id="a"+i.string(8),m.src=p,m.type="text/javascript",m.charset="UTF-8",m.onerror=this._scriptError.bind(this),m.onload=function(){f._abort(new Error("JSONP script loaded abnormally (onload)"))},m.onreadystatechange=function(){if(u("onreadystatechange",m.readyState),/loaded|closed/.test(m.readyState)){if(m&&m.htmlFor&&m.onclick){f.loadedOkay=!0;try{m.onclick()}catch{}}m&&f._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},m.async===void 0&&t.document.attachEvent)if(a.isOpera())(b=this.script2=t.document.createElement("script")).text="try{var a = document.getElementById('"+m.id+"'); if(a)a.onerror();}catch(x){};",m.async=b.async=!1;else{try{m.htmlFor=m.id,m.event="onclick"}catch{}m.async=!0}m.async!==void 0&&(m.async=!0);var S=t.document.getElementsByTagName("head")[0];S.insertBefore(m,S.firstChild),b&&S.insertBefore(b,S.firstChild)},s.exports=v}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(e,s,h){var t=e("inherits"),n=e("events").EventEmitter;function i(a,o){n.call(this);var r=this;this.bufferPosition=0,this.xo=new o("POST",a,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(l,u){r._chunkHandler(l,u),r.xo=null;var v=l===200?"network":"permanent";r.emit("close",null,v),r._cleanup()})}t(i,n),i.prototype._chunkHandler=function(a,o){if(a===200&&o)for(var r=-1;;this.bufferPosition+=r+1){var l=o.slice(this.bufferPosition);if((r=l.indexOf(`
`))===-1)break;var u=l.slice(0,r);u&&this.emit("message",u)}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},s.exports=i},{debug:void 0,events:3,inherits:54}],33:[function(e,s,h){(function(t){(function(){var n,i,a=e("../../utils/random"),o=e("../../utils/url"),r=function(){};s.exports=function(l,u,v){n||((n=t.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(i=t.document.createElement("textarea")).name="d",n.appendChild(i),t.document.body.appendChild(n));var p="a"+a.string(8);n.target=p,n.action=o.addQuery(o.addPath(l,"/jsonp_send"),"i="+p);var b=function(m){try{return t.document.createElement('<iframe name="'+m+'">')}catch{var S=t.document.createElement("iframe");return S.name=m,S}}(p);b.id=p,b.style.display="none",n.appendChild(b);try{i.value=u}catch{}n.submit();function f(m){b.onerror&&(b.onreadystatechange=b.onerror=b.onload=null,setTimeout(function(){b.parentNode.removeChild(b),b=null},500),i.value="",v(m))}return b.onerror=function(){f()},b.onload=function(){f()},b.onreadystatechange=function(m){r("onreadystatechange",p,b.readyState),b.readyState==="complete"&&f()},function(){f(new Error("Aborted"))}}}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(e,s,h){(function(t){(function(){var n=e("events").EventEmitter,i=e("inherits"),a=e("../../utils/event"),o=e("../../utils/browser"),r=e("../../utils/url"),l=function(){};function u(v,p,b){var f=this;n.call(this),setTimeout(function(){f._start(v,p,b)},0)}i(u,n),u.prototype._start=function(v,p,b){var f=this,m=new t.XDomainRequest;p=r.addQuery(p,"t="+ +new Date),m.onerror=function(){f._error()},m.ontimeout=function(){f._error()},m.onprogress=function(){l("progress",m.responseText),f.emit("chunk",200,m.responseText)},m.onload=function(){f.emit("finish",200,m.responseText),f._cleanup(!1)},this.xdr=m,this.unloadRef=a.unloadAdd(function(){f._cleanup(!0)});try{this.xdr.open(v,p),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(b)}catch{this._error()}},u.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},u.prototype._cleanup=function(v){if(this.xdr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,v)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},u.prototype.close=function(){this._cleanup(!0)},u.enabled=!(!t.XDomainRequest||!o.hasDomain()),s.exports=u}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(e,s,h){var t=e("inherits"),n=e("../driver/xhr");function i(a,o,r,l){n.call(this,a,o,r,l)}t(i,n),i.enabled=n.enabled&&n.supportsCORS,s.exports=i},{"../driver/xhr":17,inherits:54}],36:[function(e,s,h){var t=e("events").EventEmitter;function n(){var i=this;t.call(this),this.to=setTimeout(function(){i.emit("finish",200,"{}")},n.timeout)}e("inherits")(n,t),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,s.exports=n},{events:3,inherits:54}],37:[function(e,s,h){var t=e("inherits"),n=e("../driver/xhr");function i(a,o,r){n.call(this,a,o,r,{noCredentials:!0})}t(i,n),i.enabled=n.enabled,s.exports=i},{"../driver/xhr":17,inherits:54}],38:[function(e,s,h){var t=e("../utils/event"),n=e("../utils/url"),i=e("inherits"),a=e("events").EventEmitter,o=e("./driver/websocket"),r=function(){};function l(u,v,p){if(!l.enabled())throw new Error("Transport created when disabled");a.call(this);var b=this,f=n.addPath(u,"/websocket");f=f.slice(0,5)==="https"?"wss"+f.slice(5):"ws"+f.slice(4),this.url=f,this.ws=new o(this.url,[],p),this.ws.onmessage=function(m){r("message event",m.data),b.emit("message",m.data)},this.unloadRef=t.unloadAdd(function(){b.ws.close()}),this.ws.onclose=function(m){r("close event",m.code,m.reason),b.emit("close",m.code,m.reason),b._cleanup()},this.ws.onerror=function(m){b.emit("close",1006,"WebSocket connection broken"),b._cleanup()}}i(l,a),l.prototype.send=function(u){var v="["+u+"]";this.ws.send(v)},l.prototype.close=function(){var u=this.ws;this._cleanup(),u&&u.close()},l.prototype._cleanup=function(){var u=this.ws;u&&(u.onmessage=u.onclose=u.onerror=null),t.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},l.enabled=function(){return!!o},l.transportName="websocket",l.roundTrips=2,s.exports=l},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(e,s,h){var t=e("inherits"),n=e("./lib/ajax-based"),i=e("./xdr-streaming"),a=e("./receiver/xhr"),o=e("./sender/xdr");function r(l){if(!o.enabled)throw new Error("Transport created when disabled");n.call(this,l,"/xhr",a,o)}t(r,n),r.enabled=i.enabled,r.transportName="xdr-polling",r.roundTrips=2,s.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(e,s,h){var t=e("inherits"),n=e("./lib/ajax-based"),i=e("./receiver/xhr"),a=e("./sender/xdr");function o(r){if(!a.enabled)throw new Error("Transport created when disabled");n.call(this,r,"/xhr_streaming",i,a)}t(o,n),o.enabled=function(r){return!r.cookie_needed&&!r.nullOrigin&&a.enabled&&r.sameScheme},o.transportName="xdr-streaming",o.roundTrips=2,s.exports=o},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(e,s,h){var t=e("inherits"),n=e("./lib/ajax-based"),i=e("./receiver/xhr"),a=e("./sender/xhr-cors"),o=e("./sender/xhr-local");function r(l){if(!o.enabled&&!a.enabled)throw new Error("Transport created when disabled");n.call(this,l,"/xhr",i,a)}t(r,n),r.enabled=function(l){return!l.nullOrigin&&(!(!o.enabled||!l.sameOrigin)||a.enabled)},r.transportName="xhr-polling",r.roundTrips=2,s.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(e,s,h){(function(t){(function(){var n=e("inherits"),i=e("./lib/ajax-based"),a=e("./receiver/xhr"),o=e("./sender/xhr-cors"),r=e("./sender/xhr-local"),l=e("../utils/browser");function u(v){if(!r.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,v,"/xhr_streaming",a,o)}n(u,i),u.enabled=function(v){return!v.nullOrigin&&!l.isOpera()&&o.enabled},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!t.document,s.exports=u}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(e,s,h){(function(t){(function(){t.crypto&&t.crypto.getRandomValues?s.exports.randomBytes=function(n){var i=new Uint8Array(n);return t.crypto.getRandomValues(i),i}:s.exports.randomBytes=function(n){for(var i=new Array(n),a=0;a<n;a++)i[a]=Math.floor(256*Math.random());return i}}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{}],44:[function(e,s,h){(function(t){(function(){s.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch{return!1}}}}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{}],45:[function(e,s,h){var t,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;s.exports={quote:function(i){var a=JSON.stringify(i);return n.lastIndex=0,n.test(a)?(t=t||function(o){var r,l={},u=[];for(r=0;r<65536;r++)u.push(String.fromCharCode(r));return o.lastIndex=0,u.join("").replace(o,function(v){return l[v]="\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4),""}),o.lastIndex=0,l}(n),a.replace(n,function(o){return t[o]})):a}}},{}],46:[function(e,s,h){(function(t){(function(){var n=e("./random"),i={},a=!1,o=t.chrome&&t.chrome.app&&t.chrome.app.runtime;s.exports={attachEvent:function(r,l){t.addEventListener!==void 0?t.addEventListener(r,l,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+r,l),t.attachEvent("on"+r,l))},detachEvent:function(r,l){t.addEventListener!==void 0?t.removeEventListener(r,l,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+r,l),t.detachEvent("on"+r,l))},unloadAdd:function(r){if(o)return null;var l=n.string(8);return i[l]=r,a&&setTimeout(this.triggerUnloadCallbacks,0),l},unloadDel:function(r){r in i&&delete i[r]},triggerUnloadCallbacks:function(){for(var r in i)i[r](),delete i[r]}},o||s.exports.attachEvent("unload",function(){a||(a=!0,s.exports.triggerUnloadCallbacks())})}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"./random":50}],47:[function(e,s,h){(function(t){(function(){var n=e("./event"),i=e("./browser"),a=function(){};s.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){s.exports.WPrefix in t||(t[s.exports.WPrefix]={})},postMessage:function(o,r){t.parent!==t?t.parent.postMessage(JSON.stringify({windowId:s.exports.currentWindowId,type:o,data:r||""}),"*"):a()},createIframe:function(o,r){function l(){clearTimeout(p);try{f.onload=null}catch{}f.onerror=null}function u(){f&&(l(),setTimeout(function(){f&&f.parentNode.removeChild(f),f=null},0),n.unloadDel(b))}function v(m){f&&(u(),r(m))}var p,b,f=t.document.createElement("iframe");return f.src=o,f.style.display="none",f.style.position="absolute",f.onerror=function(){v("onerror")},f.onload=function(){clearTimeout(p),p=setTimeout(function(){v("onload timeout")},2e3)},t.document.body.appendChild(f),p=setTimeout(function(){v("timeout")},15e3),b=n.unloadAdd(u),{post:function(m,S){setTimeout(function(){try{f&&f.contentWindow&&f.contentWindow.postMessage(m,S)}catch{}},0)},cleanup:u,loaded:l}},createHtmlfile:function(o,r){function l(){clearTimeout(p),f.onerror=null}function u(){S&&(l(),n.unloadDel(b),f.parentNode.removeChild(f),f=S=null,CollectGarbage())}function v(I){S&&(u(),r(I))}var p,b,f,m=["Active"].concat("Object").join("X"),S=new t[m]("htmlfile");S.open(),S.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),S.close(),S.parentWindow[s.exports.WPrefix]=t[s.exports.WPrefix];var T=S.createElement("div");return S.body.appendChild(T),f=S.createElement("iframe"),T.appendChild(f),f.src=o,f.onerror=function(){v("onerror")},p=setTimeout(function(){v("timeout")},15e3),b=n.unloadAdd(u),{post:function(I,w){try{setTimeout(function(){f&&f.contentWindow&&f.contentWindow.postMessage(I,w)},0)}catch{}},cleanup:u,loaded:l}}},s.exports.iframeEnabled=!1,t.document&&(s.exports.iframeEnabled=(typeof t.postMessage=="function"||typeof t.postMessage=="object")&&!i.isKonqueror())}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{"./browser":44,"./event":46,debug:void 0}],48:[function(e,s,h){(function(t){(function(){var n={};["log","debug","warn"].forEach(function(i){var a;try{a=t.console&&t.console[i]&&t.console[i].apply}catch{}n[i]=a?function(){return t.console[i].apply(t.console,arguments)}:i==="log"?function(){}:n.log}),s.exports=n}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(e,s,h){s.exports={isObject:function(t){var n=typeof t;return n=="function"||n=="object"&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var n,i,a=1,o=arguments.length;a<o;a++)for(i in n=arguments[a])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}}},{}],50:[function(e,s,h){var t=e("crypto"),n="abcdefghijklmnopqrstuvwxyz012345";s.exports={string:function(i){for(var a=n.length,o=t.randomBytes(i),r=[],l=0;l<i;l++)r.push(n.substr(o[l]%a,1));return r.join("")},number:function(i){return Math.floor(Math.random()*i)},numberString:function(i){var a=(""+(i-1)).length;return(new Array(a+1).join("0")+this.number(i)).slice(-a)}}},{crypto:43}],51:[function(e,s,h){var t=function(){};s.exports=function(n){return{filterToEnabled:function(i,a){var o={main:[],facade:[]};return i?typeof i=="string"&&(i=[i]):i=[],n.forEach(function(r){r&&(r.transportName!=="websocket"||a.websocket!==!1?i.length&&i.indexOf(r.transportName)===-1?t("not in whitelist",r.transportName):r.enabled(a)?(t("enabled",r.transportName),o.main.push(r),r.facadeTransport&&o.facade.push(r.facadeTransport)):t("disabled",r.transportName):t())}),o}}}},{debug:void 0}],52:[function(e,s,h){var t=e("url-parse");s.exports={getOrigin:function(n){if(!n)return null;var i=new t(n);if(i.protocol==="file:")return null;var a=i.port;return a=a||(i.protocol==="https:"?"443":"80"),i.protocol+"//"+i.hostname+":"+a},isOriginEqual:function(n,i){var a=this.getOrigin(n)===this.getOrigin(i);return a},isSchemeEqual:function(n,i){return n.split(":")[0]===i.split(":")[0]},addPath:function(n,i){var a=n.split("?");return a[0]+i+(a[1]?"?"+a[1]:"")},addQuery:function(n,i){return n+(n.indexOf("?")===-1?"?"+i:"&"+i)},isLoopbackAddr:function(n){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(n)||/^\[::1\]$/.test(n)}}},{debug:void 0,"url-parse":57}],53:[function(e,s,h){s.exports="1.6.1"},{}],54:[function(e,s,h){typeof Object.create=="function"?s.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(t,n){if(n){let i=function(){};t.super_=n,i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}},{}],55:[function(e,s,h){var t=Object.prototype.hasOwnProperty;function n(i){try{return decodeURIComponent(i.replace(/\+/g," "))}catch{return null}}h.stringify=function(i,a){a=a||"";var o,r,l=[];for(r in typeof a!="string"&&(a="?"),i)if(t.call(i,r)){if((o=i[r])||o!=null&&!isNaN(o)||(o=""),r=encodeURIComponent(r),o=encodeURIComponent(o),r===null||o===null)continue;l.push(r+"="+o)}return l.length?a+l.join("&"):""},h.parse=function(i){for(var a,o=/([^=?&]+)=?([^&]*)/g,r={};a=o.exec(i);){var l=n(a[1]),u=n(a[2]);l===null||u===null||l in r||(r[l]=u)}return r}},{}],56:[function(e,s,h){s.exports=function(t,n){if(n=n.split(":")[0],!(t=+t))return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}},{}],57:[function(e,s,h){(function(t){(function(){var n=e("requires-port"),i=e("querystringify"),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,v=/^[a-zA-Z]:/;function p(w){return(w||"").toString().replace(a,"")}var b=[["#","hash"],["?","query"],function(w,_){return S(_.protocol)?w.replace(/\\/g,"/"):w},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(w){var _,E=(typeof window<"u"?window:t!==void 0?t:typeof self<"u"?self:{}).location||{},d={},A=typeof(w=w||E);if(w.protocol==="blob:")d=new I(unescape(w.pathname),{});else if(A=="string")for(_ in d=new I(w,{}),f)delete d[_];else if(A=="object"){for(_ in w)_ in f||(d[_]=w[_]);d.slashes===void 0&&(d.slashes=r.test(w.href))}return d}function S(w){return w==="file:"||w==="ftp:"||w==="http:"||w==="https:"||w==="ws:"||w==="wss:"}function T(w,_){w=(w=p(w)).replace(o,""),_=_||{};var E,d=u.exec(w),A=d[1]?d[1].toLowerCase():"",x=!!d[2],O=!!d[3],g=0;return x?g=O?(E=d[2]+d[3]+d[4],d[2].length+d[3].length):(E=d[2]+d[4],d[2].length):O?(E=d[3]+d[4],g=d[3].length):E=d[4],A==="file:"?2<=g&&(E=E.slice(2)):S(A)?E=d[4]:A?x&&(E=E.slice(2)):2<=g&&S(_.protocol)&&(E=d[4]),{protocol:A,slashes:x||S(A),slashesCount:g,rest:E}}function I(w,_,E){if(w=(w=p(w)).replace(o,""),!(this instanceof I))return new I(w,_,E);var d,A,x,O,g,C,k=b.slice(),L=typeof _,y=this,H=0;for(L!="object"&&L!="string"&&(E=_,_=null),E&&typeof E!="function"&&(E=i.parse),d=!(A=T(w||"",_=m(_))).protocol&&!A.slashes,y.slashes=A.slashes||d&&_.slashes,y.protocol=A.protocol||_.protocol||"",w=A.rest,(A.protocol==="file:"&&(A.slashesCount!==2||v.test(w))||!A.slashes&&(A.protocol||A.slashesCount<2||!S(y.protocol)))&&(k[3]=[/(.*)/,"pathname"]);H<k.length;H++)typeof(O=k[H])!="function"?(x=O[0],C=O[1],x!=x?y[C]=w:typeof x=="string"?~(g=x==="@"?w.lastIndexOf(x):w.indexOf(x))&&(w=typeof O[2]=="number"?(y[C]=w.slice(0,g),w.slice(g+O[2])):(y[C]=w.slice(g),w.slice(0,g))):(g=x.exec(w))&&(y[C]=g[1],w=w.slice(0,g.index)),y[C]=y[C]||d&&O[3]&&_[C]||"",O[4]&&(y[C]=y[C].toLowerCase())):w=O(w,y);E&&(y.query=E(y.query)),d&&_.slashes&&y.pathname.charAt(0)!=="/"&&(y.pathname!==""||_.pathname!=="")&&(y.pathname=function(R,B){if(R==="")return B;for(var D=(B||"/").split("/").slice(0,-1).concat(R.split("/")),W=D.length,V=D[W-1],X=!1,K=0;W--;)D[W]==="."?D.splice(W,1):D[W]===".."?(D.splice(W,1),K++):K&&(W===0&&(X=!0),D.splice(W,1),K--);return X&&D.unshift(""),V!=="."&&V!==".."||D.push(""),D.join("/")}(y.pathname,_.pathname)),y.pathname.charAt(0)!=="/"&&S(y.protocol)&&(y.pathname="/"+y.pathname),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(~(g=y.auth.indexOf(":"))?(y.username=y.auth.slice(0,g),y.username=encodeURIComponent(decodeURIComponent(y.username)),y.password=y.auth.slice(g+1),y.password=encodeURIComponent(decodeURIComponent(y.password))):y.username=encodeURIComponent(decodeURIComponent(y.auth)),y.auth=y.password?y.username+":"+y.password:y.username),y.origin=y.protocol!=="file:"&&S(y.protocol)&&y.host?y.protocol+"//"+y.host:"null",y.href=y.toString()}I.prototype={set:function(w,_,E){var d=this;switch(w){case"query":typeof _=="string"&&_.length&&(_=(E||i.parse)(_)),d[w]=_;break;case"port":d[w]=_,n(_,d.protocol)?_&&(d.host=d.hostname+":"+_):(d.host=d.hostname,d[w]="");break;case"hostname":d[w]=_,d.port&&(_+=":"+d.port),d.host=_;break;case"host":d[w]=_,l.test(_)?(_=_.split(":"),d.port=_.pop(),d.hostname=_.join(":")):(d.hostname=_,d.port="");break;case"protocol":d.protocol=_.toLowerCase(),d.slashes=!E;break;case"pathname":case"hash":if(_){var A=w==="pathname"?"/":"#";d[w]=_.charAt(0)!==A?A+_:_}else d[w]=_;break;case"username":case"password":d[w]=encodeURIComponent(_);break;case"auth":var x=_.indexOf(":");~x?(d.username=_.slice(0,x),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=_.slice(x+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(_))}for(var O=0;O<b.length;O++){var g=b[O];g[4]&&(d[g[1]]=d[g[1]].toLowerCase())}return d.auth=d.password?d.username+":"+d.password:d.username,d.origin=d.protocol!=="file:"&&S(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString(),d},toString:function(w){w&&typeof w=="function"||(w=i.stringify);var _,E=this,d=E.host,A=E.protocol;A&&A.charAt(A.length-1)!==":"&&(A+=":");var x=A+(E.protocol&&E.slashes||S(E.protocol)?"//":"");return E.username?(x+=E.username,E.password&&(x+=":"+E.password),x+="@"):E.password?(x+=":"+E.password,x+="@"):E.protocol!=="file:"&&S(E.protocol)&&!d&&E.pathname!=="/"&&(x+="@"),(d[d.length-1]===":"||l.test(E.hostname)&&!E.port)&&(d+=":"),x+=d+E.pathname,(_=typeof E.query=="object"?w(E.query):E.query)&&(x+=_.charAt(0)!=="?"?"?"+_:_),E.hash&&(x+=E.hash),x}},I.extractProtocol=T,I.location=m,I.trimLeft=p,I.qs=i,s.exports=I}).call(this)}).call(this,typeof N<"u"?N:typeof self<"u"?self:typeof window<"u"?window:{})},{querystringify:55,"requires-port":56}]},{},[1])(1)})})(Z);var oe=Z.exports;const ae=Y(oe),le=ee("message",()=>{const j=$([]),c=$([]),e=$([]),s=$([]),h=new re({webSocketFactory:()=>new ae("/api/stomp"),onConnect:()=>{h.subscribe("/topic/greetings",n=>{j.value.push(JSON.parse(n.body))}),h.subscribe("/topic/logs",n=>{c.value.push(JSON.parse(n.body))}),h.subscribe("/user/queue/chats",n=>{e.value.push({...JSON.parse(n.body),sender:"Bot",timeStamp:Date.now()})}),h.subscribe("/topic/records",n=>{s.value.push(JSON.parse(n.body))})}});setTimeout(()=>{h.activate()},100);function t(n,i){h.publish({destination:n,body:JSON.stringify(i)})}return{messages:j,sendMessage:t,logs:c,chats:e,records:s}});export{le as u};
