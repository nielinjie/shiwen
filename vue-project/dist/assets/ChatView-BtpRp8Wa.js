import{c as n,A as U,d as $,r as y,s as O,w as A,a as g,o as i,b as h,e as c,f as d,t as S,u as a,T as b,g as w,F as u,h as I,n as D,L as P,_ as C,i as j,j as H,k as V,I as N,l as E,m as L,B as F,p as R}from"./index-Lsp5e0DB.js";import{u as B}from"./messageStore-3ClIq2eD.js";import{M as q}from"./index-BMSQkwth.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z"}}]},name:"customer-service",theme:"outlined"};const J=G;function T(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){Q(s,o,t[o])})}return s}function Q(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var x=function(e,t){var r=T({},e,t.attrs);return n(U,T({},r,{icon:J}),null)};x.displayName="CustomerServiceOutlined";x.inheritAttrs=!1;const W=x;var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const Y=X;function z(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){Z(s,o,t[o])})}return s}function Z(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var M=function(e,t){var r=z({},e,t.attrs);return n(U,z({},r,{icon:Y}),null)};M.displayName="UserOutlined";M.inheritAttrs=!1;const K=M,ee=$("chat",()=>{const s=y(""),e=y([]),t=B(),{chats:r}=O(t);A(r.value,l=>{l.filter(f=>{var _;return f.timeStamp>(((_=e.value[e.value.length-1])==null?void 0:_.timeStamp)??0)}).forEach(f=>{e.value.push(f)})});function o(){const l={content:{body:s.value,type:"text"},sender:"User",timeStamp:Date.now()};r.value.push(l),t.sendMessage("/app/chats",l),s.value=""}const p={content:{body:"你好",type:"text"},sender:"User",timeStamp:Date.now()};return setTimeout(()=>{t.sendMessage("/app/chats",p),r.value.push(p)},1e3),{messageInputting:s,sendMessage:o,history:e}}),te=["innerHTML"],k=g({__name:"ChatMessage",props:{message:{}},setup(s){const e=s,t=new q;return(r,o)=>e.message.type=="text"?(i(),h(a(b),{key:0},{default:c(()=>[d(S(e.message.body),1)]),_:1})):(i(),w("div",{key:1,class:"marking-down",innerHTML:a(t).render(e.message.body)},null,8,te))}}),se=g({__name:"ChatItem",props:{message:{},sender:{}},setup(s){const e=s,t=e.message.type;return(r,o)=>(i(),h(a(P),{class:D(e.sender=="User"?"right":"left")},{default:c(()=>[e.sender=="User"?(i(),h(a(u),{key:0,gap:"middle"},{default:c(()=>[n(k,{message:e.message,type:a(t)},null,8,["message","type"]),n(a(u),{class:"header",gap:"middle"},{default:c(()=>[n(a(b),{strong:""},{default:c(()=>[d(S(e.sender),1)]),_:1}),n(a(I),{size:"small"},{icon:c(()=>[n(a(K))]),_:1})]),_:1})]),_:1})):(i(),h(a(u),{key:1,gap:"middle"},{default:c(()=>[n(a(u),{gap:"middle",class:"header"},{default:c(()=>[n(a(I),{size:"small"},{icon:c(()=>[n(a(W))]),_:1}),n(a(b),{strong:""},{default:c(()=>[d(S(e.sender),1)]),_:1})]),_:1}),n(k,{message:e.message,type:a(t)},null,8,["message","type"])]),_:1}))]),_:1},8,["class"]))}}),ae=C(se,[["__scopeId","data-v-e168382f"]]),ne=g({__name:"ChatArea",setup(s){const e=ee(),{history:t,messageInputting:r}=O(e),o=y(null);A(t,()=>{R(()=>{var m;o.value!=null&&(o.value.scrollTop=(m=o.value)==null?void 0:m.scrollHeight)})});function p(){e.sendMessage()}function l(m){m.preventDefault()}return(m,f)=>{const _=ae;return i(),w("div",null,[n(a(u),{vertical:"",gap:"large"},{default:c(()=>[n(a(j),{level:3},{default:c(()=>[d("Chat Here: ")]),_:1}),H("div",{class:"chatList",ref_key:"chatList",ref:o},[n(a(V),{size:"large",bordered:"",dataSource:a(t)},{renderItem:c(({item:v})=>[n(_,{sender:v.sender,message:v.content},null,8,["sender","message"])]),_:1},8,["dataSource"])],512),n(a(u),{gap:"middle"},{default:c(()=>[n(a(N),{value:a(r),"onUpdate:value":f[0]||(f[0]=v=>E(r)?r.value=v:null),onKeydown:[L(p,["native","enter"]),L(l,["native","229",""])],size:"large"},null,8,["value"]),n(a(F),{size:"large",onClick:p},{default:c(()=>[d("Send")]),_:1})]),_:1})]),_:1})])}}}),re=C(ne,[["__scopeId","data-v-d8d1e764"]]),ce=$("log",()=>{const{logs:s}=O(B());return{logs:s}}),oe=g({__name:"LogArea",setup(s){const e=ce(),{logs:t}=O(e),r=y(null);return(o,p)=>(i(),w("div",null,[n(a(u),{vertical:"",gap:"large"},{default:c(()=>[n(a(j),{level:5},{default:c(()=>[d("Log Here: ")]),_:1}),H("div",{class:"chatList",ref_key:"chatList",ref:r},[n(a(V),{size:"large",bordered:"",dataSource:a(t)},{renderItem:c(({item:l})=>[n(a(P),null,{default:c(()=>[n(a(b),null,{default:c(()=>[d(S(l.message),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["dataSource"])],512)]),_:1})]))}}),le=C(oe,[["__scopeId","data-v-4eda19bc"]]),ue={class:"r"},ie=g({__name:"ChatView",setup(s){return(e,t)=>(i(),w("div",ue,[n(a(u),{gap:"large"},{default:c(()=>[n(re),n(le)]),_:1})]))}}),fe=C(ie,[["__scopeId","data-v-1cffd322"]]);export{fe as default};
